name: GitHub Issues â†’ OpenObserve

on:
  issues:
    types: [opened, edited, deleted, closed, reopened, assigned, unassigned, labeled, unlabeled]
  issue_comment:
    types: [created, edited, deleted]

jobs:
  capture:
    runs-on: ubuntu-latest
    permissions:
      contents: read

    steps:
      - name: Send GitHub event to OpenObserve
        env:
          GITHUB_EVENT_JSON: ${{ toJson(github.event) }}
        run: |
          curl -X POST "${{ secrets.OO_CLOUD_INGEST_URL }}" \
            -H "Authorization: Basic ${{ secrets.OO_CLOUD_AUTH }}" \
            -H "Content-Type: application/json" \
            -d "$GITHUB_EVENT_JSON"

