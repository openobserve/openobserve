<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Playwright Runner</title>
    <style>
      :root {
        --bg: #0b0c10;
        --panel: #12161c;
        --panel-elev: #151a21;
        --border: #2b3642;
        --muted: #9aa3af;
        --text: #e6e6e6;
        --primary: #45a29e;
        --primary-600: #38908c;
        --danger: #c94f4f;
        --danger-600: #b24141;
        --accent: #7198ff;
        --focus: #2855ff66;
        --success: #30c48d;
        --warning: #ffb454;
      }

      * { box-sizing: border-box; }
      body { font-family: -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; margin: 0; background: var(--bg); color: var(--text); }
      header { padding: 16px 24px; background: #0f141a; border-bottom: 1px solid var(--border); position: sticky; top: 0; z-index: 10; }
      main { padding: 24px; max-width: 1100px; margin: 0 auto; }
      h1 { margin: 0; font-size: 20px; letter-spacing: 0.2px; }
      .subtitle { color: var(--muted); font-size: 12px; margin-top: 6px; }

      .card { background: var(--panel-elev); border: 1px solid var(--border); border-radius: 12px; padding: 16px; margin-bottom: 16px; box-shadow: 0 0 0 1px rgba(0,0,0,0.04), 0 6px 18px rgba(0,0,0,0.25); }
      .row { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
      .row-3 { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 12px; }
      @media (max-width: 880px) { .row, .row-3 { grid-template-columns: 1fr; } }

      .section-title { font-size: 12px; color: var(--muted); text-transform: uppercase; letter-spacing: .08em; margin: 4px 0 12px; }

      label { display: block; font-size: 12px; color: #a0a7b4; margin-bottom: 6px; }
      input, select { width: 100%; padding: 10px 12px; background: #0f1318; color: var(--text); border: 1px solid var(--border); border-radius: 10px; transition: border-color .15s, box-shadow .15s; }
      input::placeholder { color: #6f7783; }
      input:focus, select:focus { outline: none; border-color: var(--accent); box-shadow: 0 0 0 4px var(--focus); }
      input[type="checkbox"] { width: auto; box-shadow: none; }

      button { padding: 10px 14px; border: 1px solid transparent; border-radius: 10px; cursor: pointer; font-weight: 700; letter-spacing: .02em; transition: transform .02s ease, background-color .15s, border-color .15s, opacity .2s; }
      button:active { transform: translateY(1px); }
      button:disabled { opacity: .6; cursor: not-allowed; }
      .btn-primary { background: var(--primary); color: #0b0c10; }
      .btn-primary:hover { background: var(--primary-600); }
      .btn-danger { background: var(--danger); color: #0b0c10; }
      .btn-danger:hover { background: var(--danger-600); }
      .btn-secondary { background: #273040; color: var(--text); border-color: #364152; }
      .btn-secondary:hover { background: #2f3a4d; }
      .actions { display: flex; flex-wrap: wrap; gap: 12px; margin-top: 12px; }

      .status { display: inline-flex; align-items: center; gap: 8px; padding: 6px 10px; border-radius: 999px; background: #0f1318; border: 1px solid var(--border); width: max-content; }
      .dot { width: 8px; height: 8px; border-radius: 999px; background: var(--muted); box-shadow: 0 0 10px currentColor; }
      #status[data-state="idle"] .dot { background: #6b7280; }
      #status[data-state="starting"],
      #status[data-state="running"] .dot { background: var(--accent); }
      #status[data-state="done"] .dot { background: var(--success); }
      #status[data-state="error"] .dot { background: var(--danger); }
      #status[data-state="stopping"],
      #status[data-state="stopped"] .dot { background: var(--warning); }

      .logs-wrap { display: grid; gap: 10px; }
      .logs-toolbar { display: flex; justify-content: space-between; align-items: center; }
      .logs { background: #0f1318; border: 1px solid var(--border); border-radius: 12px; padding: 12px; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; white-space: pre-wrap; max-height: 54vh; overflow: auto; }
      .muted { color: var(--muted); font-size: 12px; }
      
      /* Test Counter Styles */
      .test-counter { display: flex; flex-wrap: wrap; gap: 16px; padding: 12px; background: #0f1318; border: 1px solid var(--border); border-radius: 12px; }
      .counter-item { display: flex; align-items: center; gap: 6px; }
      .counter-label { font-size: 12px; color: var(--muted); font-weight: 500; }
      .counter-value { font-size: 14px; font-weight: 700; padding: 2px 8px; border-radius: 6px; min-width: 24px; text-align: center; }
      .counter-value.passed { color: var(--success); background: rgba(48, 196, 141, 0.1); }
      .counter-value.failed { color: var(--danger); background: rgba(201, 79, 79, 0.1); }
      .counter-value.running { color: var(--accent); background: rgba(113, 152, 255, 0.1); font-size: 12px; min-width: auto; max-width: 200px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
      
      /* Color-coded log lines */
      .log-line-passed { color: var(--success); }
      .log-line-failed { color: var(--danger); }
      .log-line-running { color: var(--accent); }
      .log-line-error { color: var(--danger); font-weight: 500; }
      .log-line-warning { color: var(--warning); }
    </style>
  </head>
  <body>
    <header>
      <h1>Playwright Runner</h1>
      <div class="subtitle">Run and monitor Playwright tests with live logs</div>
    </header>
    <main>
      <section class="card">
        <div class="section-title">Target</div>
        <div class="row-3">
          <div>
            <label for="environment">Environment</label>
            <select id="environment"></select>
          </div>
          <div>
            <label for="baseUrl">Base URL</label>
            <input id="baseUrl" placeholder="https://..." />
          </div>
          <div>
            <label for="ingestionUrl">Ingestion URL (optional)</label>
            <input id="ingestionUrl" placeholder="defaults to Base URL" />
          </div>
        </div>

        <div class="section-title" style="margin-top:16px;">Credentials</div>
        <div class="row">
          <div>
            <label for="username">Username (email)</label>
            <input id="username" placeholder="root@example.com" />
          </div>
          <div>
            <label for="password">Password</label>
            <input id="password" type="password" placeholder="••••••••" />
          </div>
        </div>

        <div class="section-title" style="margin-top:16px;">Run options</div>
        <div class="row-3">
          <div>
            <label for="orgName">Org Name</label>
            <input id="orgName" placeholder="default" value="default" />
          </div>
          <div>
            <label for="tags">Tags (e.g. @smoke)</label>
            <input id="tags" placeholder="@smoke" />
          </div>
          <div>
            <label for="workers">Parallel Workers</label>
            <input id="workers" type="number" min="1" placeholder="auto" />
          </div>
        </div>
        <div class="row-3" style="margin-top: 12px; align-items: center;">
          <div style="display:flex; align-items:center; gap:8px;">
            <input id="headless" type="checkbox" checked />
            <label for="headless" style="margin:0;">Headless</label>
          </div>
          <div>
            <label for="projectPath">Project Path</label>
            <input id="projectPath" />
            <div class="muted">Default: /Users/shrinathrao/Documents/Work Files/o2_free/openobserve/tests/ui-testing/playwright-tests</div>
          </div>
        </div>

        <div class="section-title" style="margin-top: 16px;">Controls</div>
        <div class="actions">
          <button id="runBtn" class="btn-primary">Run</button>
          <button id="stopBtn" class="btn-danger" disabled>Stop</button>
          <button id="clearLogsBtn" class="btn-secondary">Clear Logs</button>
        </div>
      </section>

      <section class="card">
        <div id="status" class="status" data-state="idle"><span class="dot"></span><span class="muted">Idle</span></div>
        
        <!-- Test Counter -->
        <div id="testCounter" class="test-counter" style="margin-top: 12px; display: none;">
          <div class="counter-item">
            <span class="counter-label">Total:</span>
            <span id="totalCount" class="counter-value">0</span>
          </div>
          <div class="counter-item">
            <span class="counter-label">✅ Passed:</span>
            <span id="passedCount" class="counter-value passed">0</span>
          </div>
          <div class="counter-item">
            <span class="counter-label">❌ Failed:</span>
            <span id="failedCount" class="counter-value failed">0</span>
          </div>
          <div class="counter-item">
            <span class="counter-label">⏳ Running:</span>
            <span id="runningTest" class="counter-value running">None</span>
          </div>
        </div>

        <div class="logs-wrap" style="margin-top:12px;">
          <div class="logs-toolbar">
            <div class="muted">Live logs</div>
            <button id="copyLogsBtn" class="btn-secondary" style="padding: 4px 8px; font-size: 11px;">Copy Logs</button>
          </div>
          <pre id="logs" class="logs"></pre>
        </div>
      </section>
    </main>

    <script src="/app.js"></script>
  </body>
  </html>


